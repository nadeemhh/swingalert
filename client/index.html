<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>

  </style>
</head>
<body>
<h1>welcome</h1>



<script>
  
console.log('hii')
// up 9 down 4.5

let array_of_dates=`11/25/2022 9:04:51 AM
,11/25/2022 9:09:52 AM
,11/25/2022 9:14:52 AM
,11/25/2022 9:19:51 AM
,11/25/2022 9:24:51 AM
,11/25/2022 9:29:52 AM
,11/25/2022 9:34:52 AM
,11/25/2022 9:39:51 AM
,11/25/2022 9:44:52 AM
,11/25/2022 9:49:52 AM
,11/25/2022 9:54:52 AM
,11/25/2022 9:59:52 AM
,11/25/2022 10:04:51 AM
,11/25/2022 10:09:52 AM
,11/25/2022 10:14:52 AM
,11/25/2022 10:19:51 AM
,11/25/2022 10:24:51 AM
,11/25/2022 10:29:52 AM
,11/25/2022 10:34:51 AM
,11/25/2022 10:39:51 AM
,11/25/2022 10:44:51 AM
,11/25/2022 10:49:52 AM
,11/25/2022 10:54:52 AM
,11/25/2022 10:59:52 AM
,11/25/2022 11:04:52 AM
,11/25/2022 11:09:52 AM
,11/25/2022 11:14:52 AM
,11/25/2022 11:19:51 AM
,11/25/2022 11:24:52 AM
,11/25/2022 11:29:51 AM
,11/25/2022 11:34:52 AM
,11/25/2022 11:39:51 AM
,11/25/2022 11:44:51 AM
,11/25/2022 11:49:52 AM
,11/25/2022 11:54:52 AM
,11/25/2022 11:59:52 AM
,11/25/2022 12:04:52 PM
,11/25/2022 12:09:52 PM
,11/25/2022 12:14:51 PM
,11/25/2022 12:19:52 PM
,11/25/2022 12:24:52 PM
,11/25/2022 12:29:51 PM
,11/25/2022 12:34:51 PM
,11/25/2022 12:39:52 PM
,11/25/2022 1:19:52 PM
,11/25/2022 1:24:52 PM
,11/25/2022 1:29:52 PM
,11/25/2022 1:34:52 PM
,11/25/2022 1:39:52 PM
,11/25/2022 1:44:52 PM
,11/25/2022 1:49:52 PM
,11/25/2022 1:54:51 PM
,11/25/2022 1:59:53 PM
,11/25/2022 2:04:52 PM
,11/25/2022 2:09:52 PM
,11/25/2022 2:14:52 PM
,11/25/2022 2:19:52 PM
,11/25/2022 2:24:52 PM
,11/25/2022 2:29:52 PM
,11/25/2022 2:34:52 PM
,11/25/2022 2:39:52 PM
,11/25/2022 2:44:52 PM
,11/25/2022 2:49:52 PM
,11/25/2022 2:54:52 PM
,11/25/2022 2:59:52 PM
,11/25/2022 3:04:53 PM
,11/25/2022 3:09:53 PM`.split(',');


 let array_of_price=`2579.10
,2579.10
,2579.10
,2586.95
,2583.25
,2585.80
,2591.05
,2583.50
,2583.35
,2583.50
,2584.15
,2583.30
,2585.50
,2584.65
,2587.40
,2584.70
,2586.80
,2589.50
,2593.30
,2598.90
,2601.50
,2601.70
,2604.00
,2602.15
,2601.00
,2599.80
,2599.00
,2600.05
,2600.00
,2600.95
,2602.70
,2601.40
,2599.80
,2600.00
,2600.30
,2601.00
,2600.90
,2601.05
,2601.50
,2603.90
,2608.95
,2608.90
,2609.35
,2614.35
,2620.90
,2620.25
,2619.95
,2622.00
,2619.50
,2616.20
,2616.90
,2619.80
,2618.35
,2617.55
,2616.30
,2612.60
,2610.45
,2614.40
,2617.80
,2614.70
,2615.60
,2614.25
,2614.40
,2614.55
,2618.05
,2616.25
,2620.20`.split(',').map(function(str) {
         // using map() to convert array of strings to numbers

         return parseFloat(str); });

//let array_of_price=[28,27,28,27,26,25,26,27,28,29,30,29,28,27,28,29,30,29,28,30,31,32,31,32,33,34,35,34,33,32,31];

let swing_start;
let swing_end;
let getout=0;
let getout2=0;
let checksametypeofhighswing=[];
console.log(array_of_price,array_of_dates)
for(let i=0; i<array_of_price.length; i++){
  let persentage=0;
  let persentagecon=0;
  let margin={margin:0};
let lowmargin={lowmargin:0};
  getout=0;
  getout2=0;
  swing_start=array_of_price[i];

  if(i!=array_of_price.length-1){


   // swing up check
  // check  if swing_start is less than coming price
  if(swing_start <= array_of_price[i+1] && swing_start < array_of_price[i-1] && swing_start < array_of_price[i-2]){
    //console.log('ss',swing_start,array_of_dates[array_of_price.indexOf(swing_start)])
    let inc = i+1;
for(let ii=inc; ii<array_of_price.length; ii++){

  // check  if swing_start is less than coming price
if(swing_start <= array_of_price[ii]){
  
  margin.margin=array_of_price[ii]-swing_start;

  persentagecon=margin.margin/swing_start*100;
persentage=parseFloat(persentagecon.toFixed(2));

  swing_end=array_of_price[ii];

if(persentage >= 0.4 && swing_end > array_of_price[ii+1]){


  if(getout == 0){
if(checksametypeofhighswing.includes(swing_end)  == false){

  //console.log('high',swing_start,swing_end,persentage)
  checksametypeofhighswing.push(swing_end)
  //console.log(persentage ,'>=', 9, '&&', swing_end, '>', array_of_price[ii+1])
  getout++;
  let inc2 = ii+1;
  /////// low check
  
  for(let iii=inc2; iii<array_of_price.length; iii++){
   
    if(swing_start < array_of_price[iii]){
      
if(swing_end >= array_of_price[iii]){
  lowmargin.lowmargin=swing_end-array_of_price[iii];
  //console.log(lowmargin.lowmargin ,'.>=.', (swing_end-swing_start)/10*5,swing_start,swing_end,array_of_price[iii])
  //console.log('swing_end',swing_end,array_of_dates[array_of_price.indexOf(swing_end)],lowmargin.lowmargin,(swing_end-swing_start)/10*5)
  //console.log(array_of_dates[array_of_price.indexOf(swing_start)],'swing_start',swing_start,'swing_end',swing_end,array_of_dates[array_of_price.indexOf(array_of_price[iii])],array_of_price[iii])
  if(lowmargin.lowmargin >= (swing_end-swing_start)/10*5){
   
    if(getout2 == 0){
    console.log('low',swing_start,swing_end,array_of_price[iii],margin.margin,lowmargin.lowmargin,array_of_dates[array_of_price.indexOf(swing_start)],array_of_dates[array_of_price.indexOf(swing_end)],array_of_dates[iii])
    //console.log('low',swing_start,swing_end,array_of_price[iii],margin.margin,lowmargin.lowmargin)
    getout2++;
    }
    
  }
}

else{
  margin.margin=array_of_price[iii]-swing_start;
  swing_end=array_of_price[iii];
}
    }

    else{break;}
  }
///////////////
  
}
else{break;}
  }

}

}
else{
//console.log('yehi',swing_start,swing_end,margin.margin)
console.log('at support')
break;}
}

  }

  }

}


</script>
</body>
</html>
